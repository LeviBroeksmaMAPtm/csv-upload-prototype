<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="description" content="Tailwind CSS - MAPtm template">
  <meta name="author" content="by MAPtm">

  <title>Tailwind CSS - MAPtm template</title>

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/icons/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/icons/favicon-16x16.png">
  <link rel="manifest" href="/icons/site.webmanifest">
  <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#5bbad5">
  <link rel="shortcut icon" href="/icons/favicon.ico">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="msapplication-config" content="/icons/browserconfig.xml">
  <meta name="theme-color" content="#ffffff">

  <!-- Configuration -->
  <script defer src="../../config.min.js" inline></script>

  <!-- Tailwind CSS -->
  <link rel="stylesheet" href="../../assets/tailwind.min.css" inline>

  <!-- AWS Cognito -->
  <script defer src="../../assets/aws-sdk-2.610.0.min.js"></script>
  <script defer src="../../assets/amazon-cognito-identity.min.js"></script>
  <script defer src="../../assets/maptm_cognito.js"></script>

  <!-- Alpine.js -->
  <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.7.0/dist/alpine.min.js" defer></script>

  <!-- Diff.js -->
  <script defer src="../../assets/diff.js"></script>

  <!-- Helper functions -->
  <script defer src="../../assets/helper_functions.js"></script>

  <!-- Main -->
  <link rel="stylesheet" href="../../main.min.css" inline>
  <script defer src="../../main.min.js" inline></script>

  <!-- Other JavaScript dependencies -->
  <script src="https://www.unpkg.com/papaparse@5.3.1/papaparse.min.js" defer></script>

</head>

<body data-app="home" class="w-full min-h-screen flex items-center flex-col justify-center">
  <div class="w-full text-center mb-64">
    <a href="/" class=" bg-red-600 py-2 px-4 text-white">Plain JavaScript</a>
  </div>
  <div x-data="csvParser()">
    <div class="flex flex-col justify-center items-center w-full max-w-4xl gap-4">
      <!-- UPLOAD FORM -->
      <div class="max-w-lg">
        <h2 class="text-2xl mb-8 text-center font-bold">Upload your CSV file</h2>

        <form @submit.prevent="submit" id="myForm" class="flex flex-col h-24 justify-between">
          <input type="file" id="csvFile" accept=".csv" />
          <input id="btn-upload" type="submit"
            class="cursor-pointer hover:bg-gray-500 transition duration-300 hover:text-blue-500" />
        </form>
      </div>
      <div>
        <table class="bg-gray-900 text-white rounded-lg">
          <thead>
            <tr class="border-b border-white">
              <th class="px-4 py-2 text-left">
                Longitude
              </th>
              <th class="px-4 py-2 text-left">
                Latitude
              </th>
              <th class="px-4 py-2 text-left">
                Modaliteit
              </th>
              <th class="px-4 py-2 text-left">
                ID
              </th>
              <th class="px-4 py-2 text-left">
                Naam
              </th>
            </tr>
          </thead>
          <tbody>
            <template x-for="(row, index) in tempArr" :key="index">
              <tr class="border-b border-white">
                <td x-text="row.longitude" class="px-4 py-1"></td>
                <td x-text="row.latitude" class="px-4 py-1"></td>
                <td x-text="row.modaliteit" class="px-4 py-1"></td>
                <td x-text="row.id != '' ? row.id : 'n.v.t.' " class="px-4 py-1"></td>
                <td x-text="row.naam != '' ? row.naam : 'n.v.t.' " class="px-4 py-1"></td>
              </tr>
            </template>
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <script type='text/javascript'>
    window.csvParser = () => {
      return {
        tempArr: [],
        submit() {
          Papa.parse(document.getElementById('csvFile').files[0], {
            header: true,
            delimeter: ",",
            newline: "\n",
            skipEmptyLines: true,
            complete: results => {
              this.tempArr = results.data;
            }
          });
        }
      }
    };

  </script>


  <!-- Alpine.js dependencies -->
  <script src="../../_imports/alpine_func_footer.min.js"></script>

  <!-- <script src="./alpine_func_users.min.js"></script> -->
  <!-- <script src="./alpine_func_projects.min.js"></script> -->
</body>

</html>